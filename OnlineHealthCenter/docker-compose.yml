version: '3.4'

services:
  mongodbcontainer:
    image: mongo

  mssql:
    image: mcr.microsoft.com/mssql/server:2017-latest

  employeeinformation.api:
    image: ${DOCKER_REGISTRY-}employeeinformationapi
    build:
      context: .
      dockerfile: Services/EmployeeInformation/EmployeeInformation.API/Dockerfile

  discounts.api:
    image: ${DOCKER_REGISTRY-}discountsapi
    build:
      context: .
      dockerfile: Services/Discounts/Discounts.API/Dockerfile

  impressions.api:
    image: ${DOCKER_REGISTRY-}impressionsapi
    build:
      context: .
      dockerfile: Services/Impressions/Impressions.API/Dockerfile

  reports.api:
    image: ${DOCKER_REGISTRY-}reportsapi
    build:
      context: .
      dockerfile: Services/Reports/Report.API/Dockerfile

  impressions.grpc:
    image: ${DOCKER_REGISTRY-}impressionsgrpc
    build:
      context: .
      dockerfile: Services/Impressions/Impressions.GRPC/Dockerfile

volumes:
  mongo_data:
  mssql_data:

